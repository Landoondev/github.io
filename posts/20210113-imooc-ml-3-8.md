# 3-8 Numpy 中的聚合操作

把一组值，变成一个值。

最简单的聚合：求和。


```python
import numpy as np

L = np.random.random(100) # 100 个[0,1) 之间随机数
```


```python
%%time
sum(L)
```

    CPU times: user 30 µs, sys: 1e+03 ns, total: 31 µs
    Wall time: 33.1 µs





    49.35556813807004




```python
%%time
np.sum(L)
```

    CPU times: user 53 µs, sys: 1e+03 ns, total: 54 µs
    Wall time: 57 µs





    49.35556813807005




```python
big_array = np.random.random(1000000)
%timeit sum(big_array)
%timeit np.sum(big_array)
```

    161 ms ± 9.62 ms per loop (mean ± std. dev. of 7 runs, 10 loops each)
    365 µs ± 8.34 µs per loop (mean ± std. dev. of 7 runs, 1000 loops each)



```python
np.min(big_array)
```




    4.80886673481784e-07




```python
np.max(big_array)
```




    0.99999971558377




```python
# 面向对象的思想调用
big_array.min()
```




    4.80886673481784e-07




```python
big_array.max()
```




    0.99999971558377




```python
big_array.sum()
```




    500142.2981153931




```python
X = np.arange(16).reshape(4, 4)
X
```




    array([[ 0,  1,  2,  3],
           [ 4,  5,  6,  7],
           [ 8,  9, 10, 11],
           [12, 13, 14, 15]])




```python
np.sum(X)
```




    120




```python
np.sum(X, axis=0) # 列求和（把行维度压缩）
```




    array([24, 28, 32, 36])




```python
np.sum(X, axis=1) # 行求和
```




    array([ 6, 22, 38, 54])




```python
# 乘积
np.prod(X)
```




    0




```python
np.prod(X + 1)
```




    20922789888000




```python
np.mean(X)
```




    7.5




```python
np.median(X)
```




    7.5




```python
v = np.array([1, 1, 2, 2, 10])
np.mean(v)
```




    3.2




```python
# 更好的描述样本数据
np.median(v)
```




    2.0




```python
# 百分位
np.percentile(big_array, q=50) # 50% 的数小于0.5003448017378399
```




    0.5003448017378399




```python
np.median(big_array)
```




    0.5003448017378399




```python
np.max(big_array)
```




    0.99999971558377




```python
# 5 个百分位点的值，就可以大致知道一个样本的分布情况
for percent in [0, 25, 50, 75, 100]:
    print(np.percentile(big_array, q=percent))
```

    4.80886673481784e-07
    0.2504804053122858
    0.5003448017378399
    0.7492652922785845
    0.99999971558377



```python
np.var(big_array)
```




    0.08318117399146731




```python
np.std(big_array)
```




    0.2884114664701584




```python
x = np.random.normal(0, 1, size=1000000)
```


```python
np.mean(x)
```




    0.0005988274648600625




```python
np.std(x)
```




    0.9982620288276173


